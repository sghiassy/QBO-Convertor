/*! qbo-converter - v0.0.1 - 2025-11-27
* Copyright (c) 2025 ; Licensed BSD */
function download(e,n){blob=new Blob([n],{type:"application/vnd.intu.qbo"});var n=URL.createObjectURL(blob),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",e),$(i).html("Click to download"),i.click()}window.app={css:{}},$(document).ready(function(){app.appSetup(),app.setupFileAPI()}),app.changeFileExtension=function(e){if("string"!=typeof e)throw n="Error 2WXS: There was a problem parsing your filename. Try renaming it",app.errorSign.newMessage(n),_gaq.push(["_trackEvent","BadFileName",e]),n;var n=e.split(".");return n.pop(),n.join(".")+".qbo"},app.convertFile=function(e){var n="<ORG>",i="<FID>",a="<INTU.BID>",o=$("#fid").val()||"3106",s=$("#fid").val()||"3106",t=e.search(n),p=e.search(i),p=(e=e.substring(0,t+n.length)+"AMEX"+e.substring(p,e.length)).search(i),t=e.search("</FI>"),n=(e=e.substring(0,p+i.length)+o+e.substring(t,e.length)).search(a),p=e.search("</SONRS>");return e=e.substring(0,n+a.length)+s+e.substring(p,e.length)},app.handleFileSelect=function(e){if(e.stopPropagation(),e.preventDefault(),-1<navigator.userAgent.toLowerCase().indexOf("chrome"))for(var n,i,a=e.dataTransfer.files,o=0;n=a[o];o++)"qfx"===app.getFileExtension(n.name)?(i=n,_gaq.push(["_trackEvent","FileConverted",app.getFileExtension(i.name)]),window.scg={fileName:app.changeFileExtension(i.name)},(i=new FileReader).onload=function(e){var e=app.convertFile(e.target.result),n=window.scg.fileName||void 0;n?(app.infoSign.newMessage("You're conversion was successful. Your file will be in the 'downloads' folder, as defined in your browser's settings"),download(n,e)):(app.errorSign.newMessage("Error 6TFG: The filename was missing"),_gaq.push(["_trackEvent","FileMissing"]))},i.readAsText(n)):(_gaq.push(["_trackEvent","FileNotConverted",app.getFileExtension(n.name)]),app.errorSign.newMessage("Error 1QJ: This app only supports converting qfx files. You dragged in a "+app.getFileExtension(n.name)+" file."));else app.errorSign.newMessage("This app only works with Google Chrome. Please see the message in the top-right"),_gaq.push(["_trackEvent","BadBrowserAttempt"])},app.getFileExtension=function(e){return e.split(".")[e.split(".").length-1].toLowerCase()},app.resizeWindow=function(){app.css.windowHeight=$(window).height(),app.css.windowWidth=$(window).width(),app.css.$wrapper.css({height:app.css.windowHeight}),formLeft=app.css.windowWidth/2-app.css.$inputForm.width()/2},app.handleDragOver=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},app.setupFileAPI=function(){var e;window.File&&window.FileReader&&window.FileList&&window.Blob?((e=document.getElementById("input-form")).addEventListener("dragover",app.handleDragOver,!1),e.addEventListener("drop",app.handleFileSelect,!1)):alert("The File APIs are not fully supported in this browser.")},app.appSetup=function(){app.css.$wrapper=$("#wrapper"),app.css.$inputForm=$("#input-form"),app.css.$infoSign=$("#info-sign"),app.resizeWindow(),$(window).resize(function(){app.resizeWindow()}),app.css.$infoSign.css({top:"77px"}),$("body").click(function(e){app.infoSign.close()}),$("#enabled_advanced_override").change(function(){var e=$("#input-form"),n=parseInt(app.css.$inputForm.css("height").replace(/[^-\d\.]/g,"")),i=$("#knowledge-section"),a=parseInt(i.css("top").replace(/[^-\d\.]/g,"")),o=400;this.checked?($("#advanced_override_form_controls").css({visibility:"inherit"}),e.animate({height:n+60},o),i.animate({top:a+20},o)):($("#advanced_override_form_controls").css({visibility:"hidden"}),e.animate({height:n-60},o),i.animate({top:a-20},o))})},app.infoSign={},app.errorSign={},app.errorSign.newMessage=function(e){app.css.$infoSign.css({backgroundColor:"#DF3838",color:"white"}),app.infoSign.postMessage(e)},app.infoSign.newMessage=function(e){app.css.$infoSign.css({backgroundColor:"#E7FF17",color:"rgb(116,9,9)"}),app.infoSign.postMessage(e)},app.infoSign.postMessage=function(e){app.css.$infoSign.css({zIndex:-1}),app.css.$infoSign.html(e),app.css.$infoSign.animate({top:"0px",zIndex:1},500,function(){})},app.infoSign.close=function(){app.css.$infoSign.css({zIndex:-1}),app.css.$infoSign.animate({top:"77px"},500,function(){})};